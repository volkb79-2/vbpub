# ==========================================================================
# PWMCP stack defaults (standalone)
# ==========================================================================

[pwmcp_server]
name = "pwmcp-server"

[pwmcp_server.image]
registry = "ghcr.io"
namespace = "volkb79-2"
name = "pwmcp-server"
tag = "latest"

[pwmcp_server.ports]
ws_internal = 3000
mcp_internal = 8765
health_internal = 8081
artifact_http_internal = 8090

ws_external = 3000
mcp_external = 8765
health_external = 8081
artifact_http_external = 8090

expose_ws = false
expose_mcp = false
expose_health = false
expose_artifact_http = false

[pwmcp_server.runtime]
auth_required = true
access_token = "ASK_EXTERNAL:ACCESS_TOKEN"
ws_auth_token = ""
mcp_auth_token = ""

container_user = "vscode"
container_uid = 1000
container_gid = 1000

ws_max_sessions = 20
ws_session_timeout = 3600
ws_event_stream_enabled = true
ws_console_stream_enabled = false
ws_artifact_root = "/workspaces/artifacts"
ws_workspace_root = "/workspaces"
ws_artifact_max_bytes = 5242880

artifact_http_enabled = false
artifact_http_host = "0.0.0.0"
artifact_http_auth_required = true

ws_har_enabled = false
ws_har_content = "omit"

browser_pool_enabled = false
browser_pool_size = 4

playwright_headless = true
playwright_browser = "chromium"

mcp_enabled = true
mcp_server_name = "pwmcp-server"
mcp_allowed_hosts = "localhost,127.0.0.1"
mcp_allowed_origins = "http://localhost,http://127.0.0.1"

[pwmcp_server.health]
enabled = true
socket_timeout = 2
selftest_url = "https://www.google.de"
selftest_timeout = 5

[pwmcp_server.volumes]
workspaces_dir = "./vol-workspaces"
certs_dir = "./certs"

[reverse_proxy]
enabled = true
public_fqdn = "example.com"
letsencrypt_dir = "/etc/letsencrypt"
https_port = 443
http_enabled = false
http_port = 80

[pwmcp_server.hooks]
pre_compose = []
post_compose = []

[state]
initialized = false
